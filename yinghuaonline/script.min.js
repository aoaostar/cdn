// @license      GPL-3.0 License
!function(){$((function(){if(!t())return;const n=setInterval((()=>{$(".layui-layer-content").text().includes("æ‚¨å¯èƒ½æ˜¯ç¬¬ä¸€æ¬¡ç™»å½•ç³»ç»Ÿ")&&(layer.closeAll(),clearInterval(n))}),500);window.location.pathname.match("/user/node")&&(!function(){GM_addElement("link",{href:"//cdn.aoaostar.com/yinghuaonline/style.css?v="+GM_info.script.version,rel:"stylesheet"});const n=`<span class="aoaostar-drawer-guide" style="">ğŸ‘ˆ</span>\n<div class="aoaostar" style="display: none">\n    <div class="info">\n        <div class="title">\n            <h1>å‚²æ˜Ÿè‹±åå­¦å ‚ç½‘è¯¾åŠ©æ‰‹</h1>\n            <a class="link" href="https://www.aoaostar.com" target="_blank">https://www.aoaostar.com</a>\n        </div>\n        <div class="flex justify-center">\n            <a class="tag" href="https://github.com/aoaostar" target="_blank">\n                <span>ä½œè€…</span><span>Pluto</span>\n            </a>   \n            <a class="tag" href="https://github.com/aoaostar/cdn/tree/master/yinghuaonline" target="_blank">\n                <span>ç‰ˆæœ¬å·</span><span>v${GM_info.script.version||"è·å–å¤±è´¥"}</span>\n            </a>   \n        </div>\n        <div class="flex justify-center">\n            <div class="tag">\n                <span>å½“å‰è¯¾ç¨‹ID</span><span id="course-id">æ­£åœ¨è·å–</span>\n            </div>\n            <div class="tag">\n                <span>å½“å‰ç« èŠ‚ID</span><span id="node-id">æ­£åœ¨è·å–</span>\n            </div>\n        </div>\n        <div class="flex justify-center">\n            <div class="tag">\n                <span>è§†é¢‘æ€»æ•°</span><span id="node-count">æ­£åœ¨è·å–</span>\n            </div>\n            <div class="tag">\n                <span>è§†é¢‘æ—¶é•¿</span><span id="course-duration">æ­£åœ¨è·å–</span>\n            </div>\n        </div>\n        <div class="flex justify-center">\n            <div class="tag">\n                <span>å½“å‰ç¬¬nä¸ªè§†é¢‘</span><span id="node-index">æ­£åœ¨è·å–</span>\n            </div>\n            <div class="tag">\n                <span>å‰©ä½™è§†é¢‘</span><span id="node-surplus">æ­£åœ¨è·å–</span>\n            </div>\n        </div>\n        <div class="tag justify-center">\n            <span>è¯¾ç¨‹åç§°</span><span id="course-title">æ­£åœ¨è·å–</span>\n        </div>\n        <div class="flex justify-center">\n            <div class="tag">\n                <span>çŠ¶æ€</span><span id="node-status">æ­£åœ¨è·å–</span>\n            </div>\n            <div class="tag">\n                <span>è¿›åº¦</span><span id="node-progress">æ­£åœ¨è·å–</span>\n            </div>\n        </div>\n    </div>\n    <div class="output"></div>\n</div>`;$(document.body).append(n)}(),aoaostar_main()),window.location.pathname.match("/user/login")&&GM_getValue("menu_force_login",!0)&&(GM_addStyle("#code_row{display:none;}"),$("#login-title").text("å­¦ç”Ÿç™»å½•ï¼ˆå·²å¼€å¯å°å·å¼ºç™»ï¼‰"),$("#loginForm > .list > .item:last-child").html('<div class="inpbox">\n                                <input type="button" class="btn" id="force_login" value="å¼ºåˆ¶ç™»å½•"/>\n                            </div>'),$("#loginForm").off(),$("#force_login").click(a),$("#password").keydown((n=>{13===n.keyCode&&(n.preventDefault(),$("#force_login").click())})))}));const n=[{title:(GM_getValue("menu_force_login",!0)?"âœ…":"âŒ")+" å¼ºåˆ¶ç™»å½•ï¼ˆå°å·å¼ºç™»ï¼‰",func:function(){GM_setValue("menu_force_login",!GM_getValue("menu_force_login",!0)),notification("åˆ‡æ¢æˆåŠŸ"),location.reload()}},{title:(t()?"ğŸ åˆ é™¤":"ğŸ€ æ·»åŠ ")+"å¹³å°",func:function(){const n=t();let a=new Set(GM_getValue("platforms_data",[]));n?a.delete(document.domain):a.add(document.domain),GM_setValue("platforms_data",[...a]),notification((n?"åˆ é™¤":"æ·»åŠ ")+"å¹³å°æˆåŠŸ"),location.reload()}},{title:"ğŸ’¬ åé¦ˆ & å»ºè®® [Github]",func:function(){window.open("https://github.com/aoaostar/cdn/issues")}}];function a(){const n=$("#username").val()||"",a=$("#password").val()||"",t=$("#schoolId").val()||"";$("#remember").is(":checked")&&window.localStorage&&(localStorage.setItem("schoolId",t),localStorage.setItem("userName",n),localStorage.setItem("passWord",a),localStorage.setItem("remember","1"));let s={platform:"Android",username:n,password:a,pushId:"140fe1da9e67b9c14a7",schoolId:t,imgSign:"533560501d19cc30271a850810b09e3e",imgCode:"cryd"},e=new FormData;for(const n in s)e.append(n,s[n]);GM_xmlhttpRequest({method:"POST",url:"/api/login.json",data:e,onload:function(n){if(4===n.readyState&&200===n.status){const a=JSON.parse(n.responseText);if(a.status){let n=document.domain.split("."),t=document.domain;n.length>2&&(t=n.slice(1).join(".")),document.cookie=`token=${escape(a.result.data.token)}; domain=${t}; path=/`,notification("å¼ºåˆ¶ç™»å½•æˆåŠŸ"),window.location.href="/user"}else notification("ç™»å½•å¤±è´¥ï¼"+a.msg)}}})}function t(){return new Set(GM_getValue("platforms_data",[])).has(document.domain)}!function(){for(const a of n)GM_registerMenuCommand(a.title,a.func)}()}();